<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>D FLORENS & COLORS - Reserva de Citas</title>
    <style>
        :root {
            --primary-color: #FF007F; /* Rosa vibrante */
            --secondary-color: #FF3B30; /* Rojo intenso */
            --accent-orange: #FF9500; /* Naranja cálido */
            --accent-yellow: #FFCC00; /* Amarillo brillante */
            --accent-green: #34C759; /* Verde esmeralda */
            --accent-blue: #007AFF; /* Azul vibrante */
            --accent-purple: #AF52DE; /* Violeta intenso */
            --light-color: #FFFFFF; /* Blanco puro */
            --dark-color: #333333;
            --success-color: #34C759;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #FF007F, #AF52DE);
            color: var(--dark-color);
            line-height: 1.6;
            min-height: 100vh;
        }
        
        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
        }
        
        .page {
            display: none;
            background-color: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .active {
            display: block;
        }
        
        .logo-container {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 10px;
            background: linear-gradient(90deg, #FF3B30, #FF9500, #FFCC00, #34C759, #007AFF, #AF52DE);
        }
        
        .logo {
            font-size: 28px;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
        }
        
        h1, h2, h3 {
            color: var(--primary-color);
            margin-bottom: 15px;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
        }
        
        .btn {
            display: inline-block;
            background: linear-gradient(to right, var(--primary-color), var(--accent-purple));
            color: white;
            padding: 14px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            width: 100%;
            margin-top: 10px;
            transition: all 0.3s;
            box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
        }
        
        .btn:disabled {
            background: #cccccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .btn-secondary {
            background: linear-gradient(to right, var(--accent-blue), var(--accent-green));
        }
        
        .btn-success {
            background: linear-gradient(to right, var(--accent-green), var(--accent-blue));
        }
        
        .service-card {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .service-card:hover {
            border-color: var(--primary-color);
            box-shadow: 0 5px 10px rgba(255, 0, 127, 0.2);
        }
        
        .service-card.selected {
            border-color: var(--primary-color);
            background-color: rgba(255, 0, 127, 0.05);
        }
        
        .service-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #FF3B30, #FF9500, #FFCC00, #34C759, #007AFF, #AF52DE);
        }
        
        .service-price {
            font-weight: bold;
            color: var(--primary-color);
            font-size: 18px;
        }
        
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 20px;
        }
        
        .calendar-day {
            padding: 10px;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .calendar-day.selected {
            background-color: var(--primary-color);
            color: white;
        }
        
        .time-slots {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .time-slot {
            padding: 12px;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
        }
        
        .time-slot.selected {
            background-color: var(--primary-color);
            color: white;
        }
        
        .summary-item {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .summary-label {
            font-weight: bold;
        }
        
        .discount-section {
            background: linear-gradient(to right, rgba(255, 204, 0, 0.1), rgba(255, 149, 0, 0.1));
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--accent-yellow);
        }
        
        .payment-info {
            background: linear-gradient(to right, rgba(0, 122, 255, 0.1), rgba(175, 82, 222, 0.1));
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid var(--accent-blue);
        }
        
        .hidden {
            display: none;
        }
        
        .whatsapp-btn {
            background: linear-gradient(to right, #25D366, #128C7E);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            position: relative;
        }
        
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(to right, #FF3B30, #FF9500, #FFCC00, #34C759, #007AFF, #AF52DE);
            z-index: 1;
        }
        
        .progress-step {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 2;
            font-weight: bold;
        }
        
        .progress-step.active {
            background-color: var(--primary-color);
            color: white;
        }
        
        .terms {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            font-size: 12px;
            color: #666;
            text-align: center;
        }
        
        .gender-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .gender-option {
            flex: 1;
            text-align: center;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .gender-option.selected {
            border-color: var(--primary-color);
            background-color: rgba(255, 0, 127, 0.05);
        }
        
        .service-instruction {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px;
            background-color: rgba(0, 122, 255, 0.1);
            border-radius: 8px;
            border-left: 4px solid var(--accent-blue);
        }
        
        @media (min-width: 768px) {
            .container {
                max-width: 600px;
            }
            
            .btn {
                width: auto;
            }
            
            .btn-full {
                width: 100%;
            }
            
            .time-slots {
                grid-template-columns: repeat(4, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Página 1: Bienvenida y datos personales -->
        <div id="page1" class="page active">
            <div class="logo-container">
                <div class="logo">D FLORENS & COLORS</div>
                <h2>Gracias por su preferencia</h2>
            </div>
            
            <form id="personal-data-form">
                <div class="form-group">
                    <label for="nombre">Nombre completo:</label>
                    <input type="text" id="nombre" name="nombre" required>
                </div>
                
                <div class="form-group">
                    <label for="apellido-paterno">Apellido paterno:</label>
                    <input type="text" id="apellido-paterno" name="apellido-paterno" required>
                </div>
                
                <div class="form-group">
                    <label for="apellido-materno">Apellido materno:</label>
                    <input type="text" id="apellido-materno" name="apellido-materno" required>
                </div>
                
                <div class="form-group">
                    <label for="fecha-nacimiento">Fecha de nacimiento:</label>
                    <input type="date" id="fecha-nacimiento" name="fecha-nacimiento" required>
                </div>
                
                <div class="form-group">
                    <label for="edad">Edad:</label>
                    <input type="text" id="edad" name="edad" readonly>
                </div>
                
                <div class="form-group">
                    <label>Género:</label>
                    <div class="gender-selector">
                        <div class="gender-option" data-value="hombre">
                            <span>Hombre</span>
                        </div>
                        <div class="gender-option" data-value="mujer">
                            <span>Mujer</span>
                        </div>
                    </div>
                    <input type="hidden" id="genero" name="genero" required>
                </div>
                
                <div class="form-group">
                    <label for="colonia">Colonia:</label>
                    <input type="text" id="colonia" name="colonia" required>
                </div>
                
                <div class="form-group">
                    <label for="codigo-postal">Código postal:</label>
                    <input type="text" id="codigo-postal" name="codigo-postal" required>
                </div>
                
                <div class="form-group">
                    <label for="id-cliente">ID Cliente:</label>
                    <input type="text" id="id-cliente" name="id-cliente" readonly>
                </div>
                
                <button type="button" id="btn-next-1" class="btn">Siguiente</button>
                
                <div class="terms">
                    <p>© 2025 D FLORENS & COLORS. Todos los derechos reservados.</p>
                    <p><a href="#" id="show-terms">Términos y Condiciones</a></p>
                </div>
            </form>
        </div>
        
        <!-- Página 2: Servicios para hombres -->
        <div id="page2" class="page">
            <h2>Servicios para Hombres</h2>
            
            <div class="service-instruction">
                <p>Seleccione Servicio</p>
            </div>
            
            <div class="service-card" data-price="170">
                <div class="service-image"></div>
                <h3>Corte de cabello hombre</h3>
                <p class="service-price">$170</p>
            </div>
            
            <div class="service-card" data-price="100">
                <div class="service-image"></div>
                <h3>Corte de niño</h3>
                <p class="service-price">$100</p>
            </div>
            
            <div class="service-card" data-price="150">
                <div class="service-image"></div>
                <h3>Depilación y diseño de ceja</h3>
                <p class="service-price">$150</p>
            </div>
            
            <div class="service-card" data-price="300">
                <div class="service-image"></div>
                <h3>Corte de cabello más barba</h3>
                <p class="service-price">$300</p>
            </div>
            
            <div class="service-card" data-price="100">
                <div class="service-image"></div>
                <h3>Solo barba</h3>
                <p class="service-price">$100</p>
            </div>
            
            <button type="button" id="btn-next-2" class="btn" disabled>Siguiente</button>
            <button type="button" id="btn-back-2" class="btn btn-secondary">Atrás</button>
            
            <div class="terms">
                <p>© 2025 D FLORENS & COLORS. Todos los derechos reservados.</p>
            </div>
        </div>
        
        <!-- Página 3: Servicios para mujeres -->
        <div id="page3" class="page">
            <h2>Servicios para Mujeres</h2>
            
            <div class="form-group">
                <label for="tipo-cabello">Tipo de cabello: <span style="color: red;">*</span></label>
                <select id="tipo-cabello" name="tipo-cabello" required>
                    <option value="">Seleccione tipo de cabello</option>
                    <option value="corto">Corto</option>
                    <option value="mediano">Mediano</option>
                    <option value="largo">Largo</option>
                </select>
            </div>
            
            <div class="service-card" data-price="500">
                <div class="service-image"></div>
                <h3>Colorimetría</h3>
                <p class="service-price">$500 - $2,500 M.N</p>
            </div>
            
            <div class="service-card" data-price="248.33">
                <div class="service-image"></div>
                <h3>Corte de cabello con hidratación</h3>
                <p class="service-price">$248.33</p>
            </div>
            
            <div class="service-card" data-price="300">
                <div class="service-image"></div>
                <h3>Plancha de ceja con depilación facial</h3>
                <p class="service-price">$300</p>
            </div>
            
            <div class="service-card" data-price="408.33">
                <div class="service-image"></div>
                <h3>Tinte con sellador de color en cabello corto</h3>
                <p class="service-price">$408.33</p>
            </div>
            
            <div class="service-card" data-price="919.67">
                <div class="service-image"></div>
                <h3>Efecto de color</h3>
                <p class="service-price">$919.67</p>
            </div>
            
            <div class="service-card" data-price="1166.67">
                <div class="service-image"></div>
                <h3>Alaciados en cabello corto</h3>
                <p class="service-price">$1,166.67</p>
            </div>
            
            <div class="service-card" data-price="416.67">
                <div class="service-image"></div>
                <h3>Uñas</h3>
                <p class="service-price">$416.67</p>
            </div>
            
            <button type="button" id="btn-next-3" class="btn" disabled>Siguiente</button>
            <button type="button" id="btn-back-3" class="btn btn-secondary">Atrás</button>
            
            <div class="terms">
                <p>© 2025 D FLORENS & COLORS. Todos los derechos reservados.</p>
            </div>
        </div>
        
        <!-- Página 4: Fecha y hora -->
        <div id="page4" class="page">
            <h2>Selecciona fecha y hora</h2>
            
            <div class="form-group">
                <label for="fecha-cita">Fecha:</label>
                <input type="date" id="fecha-cita" name="fecha-cita" min="" required>
            </div>
            
            <div class="form-group">
                <label>Horario disponible (10:00 AM - 8:00 PM):</label>
                <div class="time-slots" id="time-slots">
                    <!-- Los horarios se generarán con JavaScript -->
                </div>
            </div>
            
            <button type="button" id="btn-next-4" class="btn" disabled>Siguiente</button>
            <button type="button" id="btn-back-4" class="btn btn-secondary">Atrás</button>
            
            <div class="terms">
                <p>© 2025 D FLORENS & COLORS. Todos los derechos reservados.</p>
            </div>
        </div>
        
        <!-- Página 5: Resumen y pago -->
        <div id="page5" class="page">
            <h2>Resumen de tu reserva</h2>
            
            <div id="resumen-datos">
                <!-- Los datos del resumen se llenarán con JavaScript -->
            </div>
            
            <div class="discount-section" id="discount-section">
                <h3>¿Tienes un código de descuento?</h3>
                <p>Si llegaste por medio de redes sociales (Facebook u otra plataforma digital), ingresa tu código para obtener un 40% de descuento.</p>
                <p><strong>Válido hasta: Jueves 6 de Enero</strong></p>
                
                <div class="form-group">
                    <label for="codigo-descuento">Código de descuento:</label>
                    <input type="text" id="codigo-descuento" name="codigo-descuento" placeholder="Ingresa tu código">
                </div>
                
                <button type="button" id="btn-aplicar-descuento" class="btn">Aplicar descuento</button>
            </div>
            
            <div class="payment-info">
                <h3>Información de pago</h3>
                <p>Para confirmar tu cita, necesitas realizar un pago equivalente a <strong id="monto-30"></strong> del servicio seleccionado.</p>
                
                <div id="detalle-pago">
                    <!-- Los detalles de pago se llenarán con JavaScript -->
                </div>
                
                <h4>Datos bancarios:</h4>
                <p><strong>Banco:</strong> BBVA</p>
                <p><strong>Cuenta interbancaria:</strong> 012180015033585660</p>
                <p><strong>Número de tarjeta:</strong> 4152314522365629</p>
                <p><em>Nota: Los pagos con tarjeta de crédito o débito deben realizarse directamente en la sucursal.</em></p>
            </div>
            
            <button type="button" id="btn-confirmar-pago" class="btn btn-success">Confirmar y enviar datos</button>
            <button type="button" id="btn-back-5" class="btn btn-secondary">Atrás</button>
            
            <div class="terms">
                <p>© 2025 D FLORENS & COLORS. Todos los derechos reservados.</p>
            </div>
        </div>
        
        <!-- Página 6: Confirmación y envío de comprobante -->
        <div id="page6" class="page">
            <h2>¡Reserva confirmada!</h2>
            
            <div style="text-align: center; margin-bottom: 20px;">
                <div style="font-size: 48px; color: var(--success-color);">✓</div>
                <p>Tu cita ha sido agendada exitosamente.</p>
            </div>
            
            <div id="resumen-final">
                <!-- Los datos finales se llenarán con JavaScript -->
            </div>
            
            <div class="payment-info">
                <h3>Envía tu comprobante de pago</h3>
                <p>Por favor, envía el comprobante de tu pago a través de WhatsApp para completar tu reserva.</p>
                
                <button type="button" id="btn-whatsapp" class="btn whatsapp-btn">
                    <span>Enviar comprobante por WhatsApp</span>
                </button>
                
                <p style="margin-top: 10px; font-size: 14px;">
                    O envía tu comprobante al número: <strong>5544465633</strong>
                </p>
            </div>
            
            <button type="button" id="btn-finalizar" class="btn">Finalizar</button>
            
            <div class="terms">
                <p>© 2025 D FLORENS & COLORS. Todos los derechos reservados.</p>
            </div>
        </div>
        
        <!-- Barra de progreso -->
        <div class="progress-bar">
            <div class="progress-step active">1</div>
            <div class="progress-step">2</div>
            <div class="progress-step">3</div>
            <div class="progress-step">4</div>
            <div class="progress-step">5</div>
            <div class="progress-step">6</div>
        </div>
    </div>

    <!-- Modal de Términos y Condiciones -->
    <div id="terms-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 1000; justify-content: center; align-items: center;">
        <div style="background-color: white; padding: 25px; border-radius: 10px; max-width: 90%; max-height: 80%; overflow-y: auto;">
            <h2 style="color: var(--primary-color); margin-bottom: 15px;">Términos y Condiciones</h2>
            <div style="margin-bottom: 20px;">
                <p><strong>1. Reservas y Cancelaciones</strong></p>
                <p>Para confirmar tu cita, es necesario realizar un pago anticipado equivalente al 30% del valor del servicio seleccionado. Las cancelaciones con menos de 24 horas de anticipación no son reembolsables.</p>
                
                <p><strong>2. Política de Descuentos</strong></p>
                <p>Los descuentos promocionales solo son válidos durante el período establecido y no son acumulables con otras promociones. El descuento del 40% aplica solo para clientes que lleguen a través de redes sociales con el código correspondiente.</p>
                
                <p><strong>3. Métodos de Pago</strong></p>
                <p>Aceptamos transferencias bancarias a la cuenta BBVA proporcionada. Los pagos con tarjeta de crédito o débito deben realizarse directamente en nuestra sucursal.</p>
                
                <p><strong>4. Uso de Datos Personales</strong></p>
                <p>Los datos proporcionados serán utilizados únicamente para el proceso de reserva y no serán compartidos con terceros sin su consentimiento.</p>
                
                <p><strong>5. Derechos Reservados</strong></p>
                <p>© 2025 D FLORENS & COLORS. Todos los derechos reservados. El contenido de esta aplicación es propiedad de D FLORENS & COLORS y no puede ser reproducido sin autorización.</p>
            </div>
            <button id="close-terms" class="btn" style="width: 100%;">Cerrar</button>
        </div>
    </div>

    <script>
        // Variables globales para almacenar los datos del formulario
        let userData = {
            nombre: '',
            apellidoPaterno: '',
            apellidoMaterno: '',
            fechaNacimiento: '',
            edad: '',
            genero: '',
            colonia: '',
            codigoPostal: '',
            idCliente: '',
            servicioSeleccionado: null,
            fechaCita: '',
            horaCita: '',
            precioServicio: 0,
            descuentoAplicado: false,
            montoPagar: 0,
            tipoCabello: ''
        };

        // Elementos DOM
        const pages = document.querySelectorAll('.page');
        const progressSteps = document.querySelectorAll('.progress-step');
        
        // Página 1: Datos personales
        const fechaNacimientoInput = document.getElementById('fecha-nacimiento');
        const edadInput = document.getElementById('edad');
        const idClienteInput = document.getElementById('id-cliente');
        const btnNext1 = document.getElementById('btn-next-1');
        const genderOptions = document.querySelectorAll('.gender-option');
        const generoInput = document.getElementById('genero');
        const showTermsBtn = document.getElementById('show-terms');
        const termsModal = document.getElementById('terms-modal');
        const closeTermsBtn = document.getElementById('close-terms');
        
        // Página 2: Servicios para hombres
        const servicioCardsHombres = document.querySelectorAll('#page2 .service-card');
        const btnNext2 = document.getElementById('btn-next-2');
        const btnBack2 = document.getElementById('btn-back-2');
        
        // Página 3: Servicios para mujeres
        const servicioCardsMujeres = document.querySelectorAll('#page3 .service-card');
        const tipoCabelloSelect = document.getElementById('tipo-cabello');
        const btnNext3 = document.getElementById('btn-next-3');
        const btnBack3 = document.getElementById('btn-back-3');
        
        // Página 4: Fecha y hora
        const fechaCitaInput = document.getElementById('fecha-cita');
        const timeSlotsContainer = document.getElementById('time-slots');
        const btnNext4 = document.getElementById('btn-next-4');
        const btnBack4 = document.getElementById('btn-back-4');
        
        // Página 5: Resumen y pago
        const resumenDatosDiv = document.getElementById('resumen-datos');
        const detallePagoDiv = document.getElementById('detalle-pago');
        const monto30Span = document.getElementById('monto-30');
        const codigoDescuentoInput = document.getElementById('codigo-descuento');
        const btnAplicarDescuento = document.getElementById('btn-aplicar-descuento');
        const btnConfirmarPago = document.getElementById('btn-confirmar-pago');
        const btnBack5 = document.getElementById('btn-back-5');
        
        // Página 6: Confirmación
        const resumenFinalDiv = document.getElementById('resumen-final');
        const btnWhatsApp = document.getElementById('btn-whatsapp');
        const btnFinalizar = document.getElementById('btn-finalizar');

        // Inicialización
        document.addEventListener('DOMContentLoaded', function() {
            // Establecer fecha mínima para la cita (mañana)
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            fechaCitaInput.min = tomorrow.toISOString().split('T')[0];
            
            // Generar horarios disponibles
            generarHorarios();
            
            // Event listeners para la página 1
            fechaNacimientoInput.addEventListener('change', calcularEdad);
            
            // Event listeners para selección de género
            genderOptions.forEach(option => {
                option.addEventListener('click', function() {
                    genderOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    generoInput.value = this.getAttribute('data-value');
                    userData.genero = generoInput.value;
                });
            });
            
            btnNext1.addEventListener('click', function() {
                if (validarFormulario1()) {
                    guardarDatosPersonales();
                    
                    if (userData.genero === 'hombre') {
                        mostrarPagina(2);
                    } else {
                        mostrarPagina(3);
                    }
                }
            });
            
            // Event listeners para términos y condiciones
            showTermsBtn.addEventListener('click', function(e) {
                e.preventDefault();
                termsModal.style.display = 'flex';
            });
            
            closeTermsBtn.addEventListener('click', function() {
                termsModal.style.display = 'none';
            });
            
            // Event listeners para la página 2 (HOMBRES)
            servicioCardsHombres.forEach(card => {
                card.addEventListener('click', function() {
                    // Remover selección anterior
                    servicioCardsHombres.forEach(c => c.classList.remove('selected'));
                    
                    // Seleccionar esta tarjeta
                    this.classList.add('selected');
                    
                    // Obtener precio del servicio
                    const precio = this.getAttribute('data-price');
                    userData.precioServicio = parseFloat(precio);
                    userData.servicioSeleccionado = this.querySelector('h3').textContent;
                    
                    // Habilitar botón siguiente
                    btnNext2.disabled = false;
                });
            });
            
            btnNext2.addEventListener('click', function() {
                mostrarPagina(4);
            });
            
            btnBack2.addEventListener('click', function() {
                mostrarPagina(1);
            });
            
            // Event listeners para la página 3 (MUJERES)
            tipoCabelloSelect.addEventListener('change', function() {
                userData.tipoCabello = this.value;
                verificarEstadoBotonMujeres();
            });
            
            servicioCardsMujeres.forEach(card => {
                card.addEventListener('click', function() {
                    // Remover selección anterior
                    servicioCardsMujeres.forEach(c => c.classList.remove('selected'));
                    
                    // Seleccionar esta tarjeta
                    this.classList.add('selected');
                    
                    // Obtener precio del servicio
                    const precio = this.getAttribute('data-price');
                    userData.precioServicio = parseFloat(precio);
                    userData.servicioSeleccionado = this.querySelector('h3').textContent;
                    
                    // Verificar estado del botón
                    verificarEstadoBotonMujeres();
                });
            });
            
            btnNext3.addEventListener('click', function() {
                if (validarFormularioMujeres()) {
                    mostrarPagina(4);
                }
            });
            
            btnBack3.addEventListener('click', function() {
                mostrarPagina(1);
            });
            
            // Event listeners para la página 4
            fechaCitaInput.addEventListener('change', function() {
                userData.fechaCita = this.value;
                // Habilitar botón siguiente si también hay hora seleccionada
                if (userData.horaCita) {
                    btnNext4.disabled = false;
                }
            });
            
            btnNext4.addEventListener('click', function() {
                mostrarPagina(5);
                mostrarResumen();
            });
            
            btnBack4.addEventListener('click', function() {
                const genero = userData.genero;
                if (genero === 'hombre') {
                    mostrarPagina(2);
                } else {
                    mostrarPagina(3);
                }
            });
            
            // Event listeners para la página 5
            btnAplicarDescuento.addEventListener('click', aplicarDescuento);
            btnConfirmarPago.addEventListener('click', confirmarPago);
            btnBack5.addEventListener('click', function() {
                mostrarPagina(4);
            });
            
            // Event listeners para la página 6
            btnWhatsApp.addEventListener('click', enviarWhatsApp);
            btnFinalizar.addEventListener('click', function() {
                // Reiniciar el formulario
                document.getElementById('personal-data-form').reset();
                userData = {
                    nombre: '',
                    apellidoPaterno: '',
                    apellidoMaterno: '',
                    fechaNacimiento: '',
                    edad: '',
                    genero: '',
                    colonia: '',
                    codigoPostal: '',
                    idCliente: '',
                    servicioSeleccionado: null,
                    fechaCita: '',
                    horaCita: '',
                    precioServicio: 0,
                    descuentoAplicado: false,
                    montoPagar: 0,
                    tipoCabello: ''
                };
                
                // Resetear selección de género
                genderOptions.forEach(opt => opt.classList.remove('selected'));
                generoInput.value = '';
                
                // Resetear selección de servicios
                servicioCardsHombres.forEach(card => card.classList.remove('selected'));
                servicioCardsMujeres.forEach(card => card.classList.remove('selected'));
                
                // Resetear tipo de cabello
                tipoCabelloSelect.value = '';
                
                // Deshabilitar botones de siguiente
                btnNext2.disabled = true;
                btnNext3.disabled = true;
                btnNext4.disabled = true;
                
                mostrarPagina(1);
            });
        });

        // Funciones
        function mostrarPagina(numeroPagina) {
            // Ocultar todas las páginas
            pages.forEach(page => page.classList.remove('active'));
            
            // Mostrar la página solicitada
            document.getElementById(page${numeroPagina}).classList.add('active');
            
            // Actualizar barra de progreso
            progressSteps.forEach((step, index) => {
                if (index < numeroPagina) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            });
        }

        function calcularEdad() {
            const fechaNacimiento = new Date(fechaNacimientoInput.value);
            const hoy = new Date();
            
            let edad = hoy.getFullYear() - fechaNacimiento.getFullYear();
            const mes = hoy.getMonth() - fechaNacimiento.getMonth();
            
            if (mes < 0 || (mes === 0 && hoy.getDate() < fechaNacimiento.getDate())) {
                edad--;
            }
            
            edadInput.value = edad;
            userData.edad = edad;
            
            // Generar ID del cliente
            generarIdCliente();
        }

        function generarIdCliente() {
            const nombre = document.getElementById('nombre').value.substring(0, 2).toUpperCase();
            const fechaNacimiento = fechaNacimientoInput.value.replace(/-/g, '');
            const colonia = document.getElementById('colonia').value.substring(0, 3).toUpperCase();
            
            if (nombre && fechaNacimiento && colonia) {
                const id = nombre + fechaNacimiento + colonia;
                idClienteInput.value = id;
                userData.idCliente = id;
            }
        }

        function validarFormulario1() {
            const inputs = document.querySelectorAll('#personal-data-form input[required]');
            let valido = true;
            
            inputs.forEach(input => {
                if (!input.value) {
                    valido = false;
                    input.style.borderColor = 'red';
                } else {
                    input.style.borderColor = '#ddd';
                }
            });
            
            if (!generoInput.value) {
                alert('Por favor, selecciona tu género');
                valido = false;
            }
            
            return valido;
        }

        function validarFormularioMujeres() {
            if (!userData.tipoCabello) {
                alert('Por favor, selecciona tu tipo de cabello');
                tipoCabelloSelect.style.borderColor = 'red';
                return false;
            }
            
            tipoCabelloSelect.style.borderColor = '#ddd';
            return true;
        }

        function verificarEstadoBotonMujeres() {
            // Habilitar botón siguiente solo si hay servicio seleccionado y tipo de cabello
            if (userData.servicioSeleccionado && userData.tipoCabello) {
                btnNext3.disabled = false;
            } else {
                btnNext3.disabled = true;
            }
        }

        function guardarDatosPersonales() {
            userData.nombre = document.getElementById('nombre').value;
            userData.apellidoPaterno = document.getElementById('apellido-paterno').value;
            userData.apellidoMaterno = document.getElementById('apellido-materno').value;
            userData.fechaNacimiento = fechaNacimientoInput.value;
            userData.colonia = document.getElementById('colonia').value;
            userData.codigoPostal = document.getElementById('codigo-postal').value;
        }

        function generarHorarios() {
            // Generar horarios de 10:00 AM a 8:00 PM
            for (let hora = 10; hora <= 20; hora++) {
                for (let minuto = 0; minuto < 60; minuto += 30) {
                    if (hora === 20 && minuto > 0) break; // No generar después de las 8:00 PM
                    
                    const horaFormateada = hora.toString().padStart(2, '0');
                    const minutoFormateado = minuto.toString().padStart(2, '0');
                    const horaCompleta = ${horaFormateada}:${minutoFormateado};
                    
                    const timeSlot = document.createElement('div');
                    timeSlot.className = 'time-slot';
                    timeSlot.textContent = horaCompleta;
                    
                    timeSlot.addEventListener('click', function() {
                        // Remover selección anterior
                        document.querySelectorAll('.time-slot').forEach(slot => {
                            slot.classList.remove('selected');
                        });
                        
                        // Seleccionar este horario
                        this.classList.add('selected');
                        userData.horaCita = horaCompleta;
                        
                        // Habilitar botón siguiente si también hay fecha seleccionada
                        if (userData.fechaCita) {
                            btnNext4.disabled = false;
                        }
                    });
                    
                    timeSlotsContainer.appendChild(timeSlot);
                }
            }
        }

        function mostrarResumen() {
            // Calcular monto a pagar (30% del servicio)
            userData.montoPagar = userData.precioServicio * 0.3;
            
            // Mostrar el monto del 30% en el texto
            monto30Span.textContent = $${userData.montoPagar.toFixed(2)} (equivalente al 30% del servicio);
            
            // Mostrar datos personales
            let htmlResumen = `
                <h3>Datos Personales</h3>
                <div class="summary-item">
                    <span class="summary-label">Nombre completo:</span> 
                    ${userData.nombre} ${userData.apellidoPaterno} ${userData.apellidoMaterno}
                </div>
                <div class="summary-item">
                    <span class="summary-label">Fecha de nacimiento:</span> 
                    ${userData.fechaNacimiento} (${userData.edad} años)
                </div>
                <div class="summary-item">
                    <span class="summary-label">Género:</span> 
                    ${userData.genero}
                </div>
                <div class="summary-item">
                    <span class="summary-label">Colonia y C.P.:</span> 
                    ${userData.colonia}, ${userData.codigoPostal}
                </div>
                <div class="summary-item">
                    <span class="summary-label">ID Cliente:</span> 
                    ${userData.idCliente}
                </div>
                
                <h3>Detalles de la Cita</h3>
                <div class="summary-item">
                    <span class="summary-label">Servicio:</span> 
                    ${userData.servicioSeleccionado}
                </div>`;
            
            // Agregar tipo de cabello si es mujer
            if (userData.genero === 'mujer' && userData.tipoCabello) {
                htmlResumen += `
                <div class="summary-item">
                    <span class="summary-label">Tipo de cabello:</span> 
                    ${userData.tipoCabello}
                </div>`;
            }
            
            htmlResumen += `
                <div class="summary-item">
                    <span class="summary-label">Precio del servicio:</span> 
                    $${userData.precioServicio.toFixed(2)}
                </div>
                <div class="summary-item">
                    <span class="summary-label">Fecha y hora:</span> 
                    ${userData.fechaCita} a las ${userData.horaCita}
                </div>
            `;
            
            resumenDatosDiv.innerHTML = htmlResumen;
            
            // Mostrar detalles de pago
            detallePagoDiv.innerHTML = `
                <div class="summary-item">
                    <span class="summary-label">Servicio seleccionado:</span> 
                    $${userData.precioServicio.toFixed(2)}
                </div>
                <div class="summary-item">
                    <span class="summary-label">Monto a pagar (30%):</span> 
                    $${userData.montoPagar.toFixed(2)}
                </div>
            `;
        }

        function aplicarDescuento() {
            const codigo = codigoDescuentoInput.value.trim();
            
            // Verificar si el código es válido
            if (codigo === 'COLORS' || codigo === 'INFINITO') {
                userData.descuentoAplicado = true;
                
                // Aplicar 40% de descuento al precio del servicio
                const precioConDescuento = userData.precioServicio * 0.6;
                userData.montoPagar = precioConDescuento * 0.3; // 30% del precio con descuento
                
                // Actualizar detalles de pago
                detallePagoDiv.innerHTML = `
                    <div class="summary-item">
                        <span class="summary-label">Servicio seleccionado:</span> 
                        $${userData.precioServicio.toFixed(2)}
                    </div>
                    <div class="summary-item" style="color: var(--success-color);">
                        <span class="summary-label">Descuento aplicado (40%):</span> 
                        -$${(userData.precioServicio * 0.4).toFixed(2)}
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Nuevo precio del servicio:</span> 
                        $${(userData.precioServicio * 0.6).toFixed(2)}
                    </div>
                    <div class="summary-item">
                        <span class="summary-label">Monto a pagar (30%):</span> 
                        $${userData.montoPagar.toFixed(2)}
                    </div>
                `;
                
                // Actualizar el texto del monto del 30%
                monto30Span.textContent = $${userData.montoPagar.toFixed(2)} (equivalente al 30% del servicio con descuento);
                
                alert('¡Descuento aplicado correctamente!');
            } else {
                alert('Código de descuento no válido. Por favor, inténtalo de nuevo.');
            }
        }

        function confirmarPago() {
            // En una aplicación real, aquí se procesaría el pago
            // Por ahora, simplemente avanzamos a la página de confirmación
            
            // Mostrar resumen final
            let htmlFinal = `
                <h3>Resumen de tu reserva</h3>
                <div class="summary-item">
                    <span class="summary-label">Nombre:</span> 
                    ${userData.nombre} ${userData.apellidoPaterno} ${userData.apellidoMaterno}
                </div>
                <div class="summary-item">
                    <span class="summary-label">Servicio:</span> 
                    ${userData.servicioSeleccionado}
                </div>`;
            
            // Agregar tipo de cabello si es mujer
            if (userData.genero === 'mujer' && userData.tipoCabello) {
                htmlFinal += `
                <div class="summary-item">
                    <span class="summary-label">Tipo de cabello:</span> 
                    ${userData.tipoCabello}
                </div>`;
            }
            
            htmlFinal += `
                <div class="summary-item">
                    <span class="summary-label">Fecha y hora:</span> 
                    ${userData.fechaCita} a las ${userData.horaCita}
                </div>
                <div class="summary-item">
                    <span class="summary-label">Monto a pagar:</span> 
                    $${userData.montoPagar.toFixed(2)}
                </div>
                ${userData.descuentoAplicado ? '<div class="summary-item" style="color: var(--success-color);"><span class="summary-label">Descuento aplicado:</span> 40%</div>' : ''}
            `;
            
            resumenFinalDiv.innerHTML = htmlFinal;
            
            mostrarPagina(6);
            
            // Enviar mensaje de WhatsApp automáticamente (simulado)
            setTimeout(enviarWhatsApp, 1000);
        }

        function enviarWhatsApp() {
            let mensaje = `Hola, he realizado una reserva en D FLORENS & COLORS con los siguientes datos:
            
Nombre: ${userData.nombre} ${userData.apellidoPaterno} ${userData.apellidoMaterno}
ID Cliente: ${userData.idCliente}
Servicio: ${userData.servicioSeleccionado}`;

            // Agregar tipo de cabello si es mujer
            if (userData.genero === 'mujer' && userData.tipoCabello) {
                mensaje += \nTipo de cabello: ${userData.tipoCabello};
            }

            mensaje += `
Fecha: ${userData.fechaCita}
Hora: ${userData.horaCita}
Monto a pagar: $${userData.montoPagar.toFixed(2)}
${userData.descuentoAplicado ? 'Descuento aplicado: 40%' : ''}

Por favor, confirmar mi cita.`;

            // Codificar el mensaje para URL
            const mensajeCodificado = encodeURIComponent(mensaje);
            
            // Número de WhatsApp
            const numeroWhatsApp = '5544465633';
            
            // Crear enlace de WhatsApp
            const urlWhatsApp = https://wa.me/${numeroWhatsApp}?text=${mensajeCodificado};
            
            // Abrir enlace en una nueva pestaña
            window.open(urlWhatsApp, '_blank');
        }
    </script>
</body>
</html>